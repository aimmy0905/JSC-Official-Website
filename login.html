<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="JSC Dropshipping - 登录">
    <title>JSC Dropshipping - 登录</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="login-page">
    <!-- 登录容器 -->
    <div class="login-container">
        <!-- Logo -->
        <div class="login-logo">
            <h1>JSC</h1>
        </div>

        <!-- 登录表单 -->
        <div class="login-card">
            <h2 class="login-title">登录</h2>
            
            <form class="login-form" id="loginForm">
                <!-- 账号输入 -->
                <div class="form-group">
                    <label for="username">账号</label>
                    <input 
                        type="text" 
                        id="username" 
                        name="username" 
                        placeholder="请输入账号" 
                        required
                    >
                </div>

                <!-- 密码输入 -->
                <div class="form-group">
                    <label for="password">密码</label>
                    <div class="password-input-wrapper">
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="请输入密码" 
                            required
                        >
                        <button type="button" class="toggle-password" onclick="togglePassword()">
                            <i class="fas fa-eye-slash"></i>
                        </button>
                    </div>
                </div>

                <!-- 验证码输入 -->
                <div class="form-group">
                    <label for="captcha">验证码</label>
                    <div class="captcha-input-wrapper">
                        <input 
                            type="text" 
                            id="captcha" 
                            name="captcha" 
                            placeholder="请输入验证码" 
                            required
                        >
                        <div class="captcha-image">
                            <canvas id="captchaCanvas" width="120" height="40"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 忘记密码和注册链接 -->
                <div class="form-links">
                    <a href="#" class="link-forgot-password">忘记密码?</a>
                    <a href="#" class="link-register">没有账号? 立即注册</a>
                </div>

                <!-- 登录按钮 -->
                <button type="submit" class="btn-login-submit">
                    登录
                </button>
            </form>
        </div>

        <!-- 返回首页链接 -->
        <div class="back-to-home">
            <a href="index.html">
                <i class="fas fa-arrow-left"></i> 返回首页
            </a>
        </div>
    </div>

    <script>
        // 生成验证码
        function generateCaptcha() {
            const canvas = document.getElementById('captchaCanvas');
            const ctx = canvas.getContext('2d');
            
            // 清除画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // 绘制背景
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#f0f0f0');
            gradient.addColorStop(1, '#e8e8e8');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // 生成随机验证码
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnpqrstuvwxyz23456789';
            let captchaText = '';
            for (let i = 0; i < 4; i++) {
                captchaText += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            
            // 绘制验证码文本
            ctx.font = 'bold 24px Arial';
            ctx.textBaseline = 'middle';
            
            for (let i = 0; i < captchaText.length; i++) {
                const x = 15 + i * 25;
                const y = 20;
                const angle = (Math.random() - 0.5) * 0.4;
                
                ctx.save();
                ctx.translate(x, y);
                ctx.rotate(angle);
                
                // 随机颜色
                const colors = ['#6B4FBB', '#FF8C42', '#5a3fa0', '#e67a30'];
                ctx.fillStyle = colors[Math.floor(Math.random() * colors.length)];
                ctx.fillText(captchaText[i], 0, 0);
                ctx.restore();
            }
            
            // 添加干扰线
            for (let i = 0; i < 3; i++) {
                ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.beginPath();
                ctx.moveTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.lineTo(Math.random() * canvas.width, Math.random() * canvas.height);
                ctx.stroke();
            }
            
            // 添加干扰点
            for (let i = 0; i < 30; i++) {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
                ctx.beginPath();
                ctx.arc(
                    Math.random() * canvas.width,
                    Math.random() * canvas.height,
                    1,
                    0,
                    2 * Math.PI
                );
                ctx.fill();
            }
            
            // 存储验证码文本
            canvas.dataset.captcha = captchaText;
        }
        
        // 切换密码可见性
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const toggleBtn = document.querySelector('.toggle-password i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.classList.remove('fa-eye-slash');
                toggleBtn.classList.add('fa-eye');
            } else {
                passwordInput.type = 'password';
                toggleBtn.classList.remove('fa-eye');
                toggleBtn.classList.add('fa-eye-slash');
            }
        }
        
        // 点击验证码图片刷新
        document.addEventListener('DOMContentLoaded', function() {
            generateCaptcha();
            
            const captchaCanvas = document.getElementById('captchaCanvas');
            captchaCanvas.style.cursor = 'pointer';
            captchaCanvas.addEventListener('click', generateCaptcha);
        });
        
        // 表单提交处理
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const captcha = document.getElementById('captcha').value;
            const correctCaptcha = document.getElementById('captchaCanvas').dataset.captcha;
            
            // 验证验证码
            if (captcha.toLowerCase() !== correctCaptcha.toLowerCase()) {
                alert('验证码错误，请重新输入！');
                generateCaptcha();
                document.getElementById('captcha').value = '';
                return;
            }
            
            // 这里应该连接到 Shopify App 的实际登录接口
            // 目前只是演示效果
            alert('登录功能演示：\n账号：' + username + '\n\n实际使用时，这里会连接到 Shopify App 的登录接口。');
            
            // 实际项目中，这里应该是：
            // window.location.href = 'https://apps.shopify.com/your-app-login';
        });
    </script>
</body>
</html>

